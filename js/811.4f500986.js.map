{"version":3,"file":"js/811.4f500986.js","mappings":"0MAAA,MAAMA,EAAgB,uHAChBC,EAAe,6IACfC,EAAmB,eAEzB,IAAIC,EAAiB,KAErB,SAASC,IACP,OAAOC,SAASC,KAAKC,UAAUC,SAAS,aAAe,OAAS,OAClE,CAEA,SAASC,IACP,MAAMC,EAASL,SAASM,cAAc,OAMtC,OALAD,EAAOE,UAAY,qBACnBF,EAAOG,UAAY,kHAIZH,CACT,CAEA,SAASI,EAAeC,GACtB,MAAMC,EAASX,SAASM,cAAc,UACtCK,EAAOJ,UAAY,mBACnBI,EAAOC,MAAQ,cACfD,EAAOE,aAAa,aAAc,eAClCF,EAAOE,aAAa,UAAW,QAC/BF,EAAOE,aAAa,iBAAkB,eACtC,MAAMC,EAAsB,SAAVJ,EAAmBd,EAAeD,EAyBpD,OAxBAgB,EAAOI,OAAS,keAoBKD,gDAIdH,CACT,CAEA,SAASK,EAAiBC,EAAWP,GACnCO,EAAUT,UAAY,GACtB,MAAMH,EAASD,IACfa,EAAUC,YAAYb,GAEtB,MAAMM,EAASF,EAAeC,GAC9BC,EAAOQ,iBAAiB,OAAQ,KAC9Bd,EAAOH,UAAUkB,IAAI,8BACrBC,WAAW,KACThB,EAAOiB,UACN,OAELL,EAAUC,YAAYP,EACxB,CAEO,SAASY,IACd,MAAMN,EAAYjB,SAASwB,cAAc,eACzC,IAAKP,EACH,OAGF,IAAIQ,EAAe1B,IACnBiB,EAAiBC,EAAWQ,GAE5B,MAAMC,EAAqBC,IACzB,MAAMC,EAAYD,GAAOE,QAAQnB,OAASX,IACtC6B,IAAcH,IAGlBA,EAAeG,EACfZ,EAAiBC,EAAWQ,KAG9BK,OAAOX,iBAAiBtB,EAAkB6B,GAE1C5B,EAAiBA,KACfgC,OAAOC,oBAAoBlC,EAAkB6B,GAC7CT,EAAUT,UAAY,GAE1B,CAEO,SAASwB,IACVlC,IACFA,IACAA,EAAiB,KAErB,C","sources":["webpack://personalpage/./src/assets/js/loadmap.js"],"sourcesContent":["const MAP_URL_LIGHT = 'https://mapmyvisitors.com/map.js?cl=606060&w=a&t=n&d=NuzI5fMF9fqCHtkxcTx3LZO5mvAbEZrLLxG3ZW1E-KY&co=ffffff&ct=606060';\nconst MAP_URL_DARK = 'https://mapmyvisitors.com/map.js?cl=fafafa&w=a&t=n&d=NuzI5fMF9fqCHtkxcTx3LZO5mvAbEZrLLxG3ZW1E-KY&co=000000&cmo=3acc3a&cmn=ff5353&ct=808080';\nconst THEME_EVENT_NAME = 'theme-change';\n\nlet cleanupHandler = null;\n\nfunction getTheme() {\n  return document.body.classList.contains('dark-mode') ? 'dark' : 'light';\n}\n\nfunction createLoader() {\n  const loader = document.createElement('div');\n  loader.className = 'visitor-map-loader';\n  loader.innerHTML = `\n    <span class=\"visitor-map-loader__spinner\" aria-hidden=\"true\"></span>\n    <p>Loading visitor mapâ€¦</p>\n  `;\n  return loader;\n}\n\nfunction createMapFrame(theme) {\n  const iframe = document.createElement('iframe');\n  iframe.className = 'visitormap-frame';\n  iframe.title = 'Visitor map';\n  iframe.setAttribute('aria-label', 'Visitor map');\n  iframe.setAttribute('loading', 'lazy');\n  iframe.setAttribute('referrerpolicy', 'no-referrer');\n  const scriptUrl = theme === 'dark' ? MAP_URL_DARK : MAP_URL_LIGHT;\n  iframe.srcdoc = `\n    <!doctype html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"utf-8\" />\n        <style>\n          * { box-sizing: border-box; }\n          html, body {\n            margin: 0;\n            height: 100%;\n            background: transparent;\n          }\n          #mapmyvisitors {\n            width: 100%;\n            height: 100%;\n          }\n        </style>\n      </head>\n      <body>\n        <div id=\"mapmyvisitors\"></div>\n        <script src=\"${scriptUrl}\"></script>\n      </body>\n    </html>\n  `;\n  return iframe;\n}\n\nfunction renderVisitorMap(container, theme) {\n  container.innerHTML = '';\n  const loader = createLoader();\n  container.appendChild(loader);\n\n  const iframe = createMapFrame(theme);\n  iframe.addEventListener('load', () => {\n    loader.classList.add('visitor-map-loader--hidden');\n    setTimeout(() => {\n      loader.remove();\n    }, 500);\n  });\n  container.appendChild(iframe);\n}\n\nexport function initScript() {\n  const container = document.querySelector('.visitormap');\n  if (!container) {\n    return;\n  }\n\n  let currentTheme = getTheme();\n  renderVisitorMap(container, currentTheme);\n\n  const handleThemeChange = (event) => {\n    const nextTheme = event?.detail?.theme || getTheme();\n    if (nextTheme === currentTheme) {\n      return;\n    }\n    currentTheme = nextTheme;\n    renderVisitorMap(container, currentTheme);\n  };\n\n  window.addEventListener(THEME_EVENT_NAME, handleThemeChange);\n\n  cleanupHandler = () => {\n    window.removeEventListener(THEME_EVENT_NAME, handleThemeChange);\n    container.innerHTML = '';\n  };\n}\n\nexport function cleanupScript() {\n  if (cleanupHandler) {\n    cleanupHandler();\n    cleanupHandler = null;\n  }\n}\n"],"names":["MAP_URL_LIGHT","MAP_URL_DARK","THEME_EVENT_NAME","cleanupHandler","getTheme","document","body","classList","contains","createLoader","loader","createElement","className","innerHTML","createMapFrame","theme","iframe","title","setAttribute","scriptUrl","srcdoc","renderVisitorMap","container","appendChild","addEventListener","add","setTimeout","remove","initScript","querySelector","currentTheme","handleThemeChange","event","nextTheme","detail","window","removeEventListener","cleanupScript"],"sourceRoot":""}