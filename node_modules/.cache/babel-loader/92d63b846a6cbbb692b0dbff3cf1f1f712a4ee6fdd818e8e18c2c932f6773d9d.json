{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport function initScript() {\n  function onDOMContentLoaded() {\n    console.log('DOM fully loaded and parsed');\n    // Your script logic here\n    let shakeQueue = [];\n    let isShaking = false;\n    let pressCount = 0;\n    let pressed = false;\n    let resetTimeout;\n    const maxAngle = 360; // Maximum angle to prevent excessive shaking\n    const minDuration = 0.2; // Minimum duration to prevent excessive speed\n\n    let canPlayVideo = true;\n    let currentTimeoutId; // Variable to store the current timeout ID\n\n    const videoSources = [{\n      src: \"/assets/vid/home1.mp4\",\n      class: \"homevideo1\",\n      description: \"Sunbathing, beers, and ocean breezes on the Mediterranean!\"\n    }, {\n      src: \"/assets/vid/home2.mp4\",\n      class: \"homevideo2\",\n      description: \"Ducks enjoying a swim by the oceanside, weaving between the boats.\"\n    }, {\n      src: \"/assets/vid/home3.mp4\",\n      class: \"homevideo3\",\n      description: \"A cat strolling on the ancient stone steps, shot in Athens.\"\n    }];\n    let nonPlayed = [...videoSources];\n    let currentVideoSource = videoSources[0];\n    function isMobilePhone() {\n      const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n      return /android|iPhone|iPod/i.test(userAgent);\n    }\n    function isTouchScreen() {\n      const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n      return /android|iPhone|iPad|iPod/i.test(userAgent);\n    }\n    function changeVideoSource() {\n      // Get a new random index from nonPlayed\n      const newIndex = Math.floor(Math.random() * nonPlayed.length);\n\n      // Select the new video source using the new index\n      const source = nonPlayed.splice(newIndex, 1)[0]; // Remove the selected video from nonPlayed\n      currentVideoSource = source;\n      const videoElement = document.getElementById('videoElement');\n      const currentSourceElement = videoElement.querySelector('source');\n      currentSourceElement.setAttribute('src', source.src);\n      videoElement.setAttribute('class', source.class);\n      videoElement.load();\n\n      // Update the description content\n      const descriptionContentElement = document.getElementById('descriptionContent');\n      descriptionContentElement.innerHTML = `${source.description}<br><p>Click for color and sound!</p>`;\n    }\n    function preloadVideos() {\n      videoSources.forEach(videoData => {\n        const video = document.createElement('video');\n        video.src = videoData.src;\n        video.preload = 'auto';\n        video.autoplay = true;\n        video.loop = true;\n        video.muted = true;\n        video.style.display = 'none'; // Hide the video element\n        document.body.appendChild(video);\n      });\n    }\n    function updateSubtitle() {\n      const subtitleElement = document.getElementById('welcomeSubtitle');\n      const isMobile = window.matchMedia(\"(max-width: 768px)\").matches;\n      if (isMobile) {\n        subtitleElement.textContent = \"Hello! I'm Han-yu, a junior at HKU, majoring in AI. I love to explore new places and code apps. I'm ready to share my journey with you!\";\n      } else {\n        subtitleElement.textContent = \"Hello! I'm Han-yu (Henry), a junior at HKU, majoring in Applied AI. I love to explore new places and code apps. I'm excited to have you here and share my journey with you!\";\n      }\n    }\n    function getTextWidth(text, font) {\n      const canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement(\"canvas\"));\n      const context = canvas.getContext(\"2d\");\n      context.font = font;\n      const metrics = context.measureText(text);\n      return metrics.width;\n    }\n    function getCssStyle(element, prop) {\n      return window.getComputedStyle(element, null).getPropertyValue(prop);\n    }\n    function getCanvasFont(el) {\n      const fontWeight = getCssStyle(el, 'font-weight') || 'normal';\n      const fontSize = getCssStyle(el, 'font-size') || '16px';\n      const fontFamily = getCssStyle(el, 'font-family') || 'Times New Roman';\n      return `${fontWeight} ${fontSize} ${fontFamily}`;\n    }\n    function adjustTitle() {\n      const videoElement = document.getElementById('videoElement');\n      const imageElement = document.getElementById('imageElement');\n      const titleElement = document.getElementById('welcomeTitle');\n      const subtitleElement = document.getElementById('welcomeSubtitle');\n      const compassIcon = document.getElementById('compassIcon');\n      const mediaElement = videoElement.style.display !== 'none' ? videoElement : imageElement;\n      const mediaHeight = mediaElement.clientHeight;\n      const availableWidth = document.querySelector('.welcome-text').clientWidth;\n\n      // Adjust the font size and line height of the title to fit the width\n      let titleFontSize = 1; // Start with a smaller font size\n      titleElement.style.fontSize = `${titleFontSize}em`;\n      let iconScaleFactor = 0.3; // Scale factor to adjust the icon size relative to the text\n      compassIcon.style.fontSize = `${titleFontSize * iconScaleFactor}em`;\n      let textWidth = getTextWidth(titleElement.textContent.replace('O', ''), getCanvasFont(titleElement)) + compassIcon.clientWidth;\n      while (textWidth < availableWidth && titleFontSize < 5) {\n        // Constrain max font size to 5em\n        titleFontSize += 0.1;\n        titleElement.style.fontSize = `${titleFontSize}em`;\n        compassIcon.style.fontSize = `${titleFontSize * iconScaleFactor}em`;\n        textWidth = getTextWidth(titleElement.textContent.replace('O', ''), getCanvasFont(titleElement)) + compassIcon.clientWidth;\n      }\n      while (textWidth > availableWidth && titleFontSize > 0.5) {\n        // Constrain min font size to 0.5em\n        titleFontSize -= 0.1;\n        titleElement.style.fontSize = `${titleFontSize}em`;\n        compassIcon.style.fontSize = `${titleFontSize * iconScaleFactor}em`;\n        textWidth = getTextWidth(titleElement.textContent.replace('O', ''), getCanvasFont(titleElement)) + compassIcon.clientWidth;\n      }\n    }\n    function adjustSubtitle() {\n      const videoElement = document.getElementById('videoElement');\n      const imageElement = document.getElementById('imageElement');\n      const titleElement = document.getElementById('welcomeTitle');\n      const subtitleElement = document.getElementById('welcomeSubtitle');\n      const compassIcon = document.getElementById('compassIcon');\n      const mediaElement = videoElement.style.display !== 'none' ? videoElement : imageElement;\n      const mediaHeight = mediaElement.clientHeight;\n      const availableWidth = document.querySelector('.welcome-text').clientWidth;\n\n      // Fix the title font size and adjust the subtitle to match the height of the video\n      let subtitleFontSize = 1;\n      subtitleElement.style.fontSize = `${subtitleFontSize}em`;\n      let totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n      while (totalHeight < mediaHeight && subtitleFontSize < 3) {\n        // Constrain max font size to 3em\n        subtitleFontSize += 0.01;\n        subtitleElement.style.fontSize = `${subtitleFontSize}em`;\n        totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n      }\n\n      // Reduce font size and line height if the total height exceeds the video height\n      while (totalHeight > mediaHeight && subtitleFontSize > 0.5) {\n        // Ensure font size does not go below 0.5em\n        subtitleFontSize -= 0.01;\n        subtitleElement.style.fontSize = `${subtitleFontSize}em`;\n        totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n      }\n\n      // Adjust the line height of the subtitle element to fit within the media height\n      let subtitleLineHeight = 1.4; // Starting line height\n      subtitleElement.style.lineHeight = subtitleLineHeight;\n      totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n      while (totalHeight < mediaHeight && subtitleLineHeight < 2) {\n        // Constrain max line height to 2\n        subtitleLineHeight += 0.1;\n        subtitleElement.style.lineHeight = subtitleLineHeight;\n        totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n      }\n      while (totalHeight > mediaHeight && subtitleLineHeight > 1) {\n        // Ensure line height does not go below 1\n        subtitleLineHeight -= 0.1;\n        subtitleElement.style.lineHeight = subtitleLineHeight;\n        totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n      }\n    }\n    function updateTitles() {\n      updateSubtitle();\n      adjustTitle();\n      const isSmallScreen = window.matchMedia(\"(max-width: 600px)\").matches;\n      if (isSmallScreen) {\n        document.getElementById('welcomeTitle').style.fontSize = '2em';\n        document.getElementById('compassIcon').style.fontSize = '1.1em';\n      }\n      adjustSubtitle();\n    }\n    function typeWriterEffect(text, element, delay = 100, callback) {\n      // Clear any existing timeout to interrupt the previous typing effect\n      if (currentTimeoutId) {\n        clearTimeout(currentTimeoutId);\n      }\n      element.innerHTML = '';\n      let index = 0;\n      const spans = [];\n\n      // Step 1: Create a span for each character\n      for (let i = 0; i < text.length; i++) {\n        const span = document.createElement('span');\n        span.className = 'typed';\n        span.style.color = 'transparent'; // Initially transparent\n        span.textContent = text[i];\n        element.appendChild(span);\n        spans.push(span);\n      }\n\n      // Step 2: Turn each span into the text color one by one\n      function reveal() {\n        if (index < spans.length) {\n          const isDarkMode = document.body.classList.contains('dark-mode');\n          const textColor = isDarkMode ? '#fafafa' : '#252525'; // Change text color based on theme\n\n          spans[index].style.transition = `color 2s`;\n          spans[index].style.color = textColor;\n          index++;\n          currentTimeoutId = setTimeout(reveal, delay); // Store the timeout ID\n        } else {\n          if (callback) callback();\n        }\n      }\n      reveal();\n    }\n    function videoTransition() {\n      let fadeOutApplied = false;\n      const transitionOverlay = document.getElementById('transitionOverlay');\n      transitionOverlay.style.transition = 'opacity 0.3s ease-in-out';\n      videoElement.addEventListener('timeupdate', () => {\n        const timeLeft = videoElement.duration - videoElement.currentTime;\n        if (timeLeft < 0.6 && !fadeOutApplied) {\n          // Adjust the time threshold as needed\n          transitionOverlay.style.opacity = '1';\n          fadeOutApplied = true;\n        }\n      });\n      videoElement.addEventListener('timeupdate', () => {\n        if (videoElement.currentTime > 0.2 && videoElement.currentTime < 1.2) {\n          transitionOverlay.style.opacity = '0';\n          fadeOutApplied = false; // Reset the flag when the video starts playing again\n        }\n      });\n\n      // videoElement.addEventListener('playing', () => {\n      //     transitionOverlay.style.opacity = '0';\n      //     fadeOutApplied = false; // Reset the flag when the video starts playing again\n      // });\n    }\n    function processShakeQueue() {\n      if (shakeQueue.length === 0 || isShaking) return;\n      isShaking = true;\n      const {\n        newAngle,\n        newDuration\n      } = shakeQueue.shift();\n      const compassIcon = document.getElementById('compassIcon');\n      compassIcon.style.setProperty('--shake-angle', `${newAngle}deg`);\n      compassIcon.style.setProperty('--shake-duration', `${newDuration}s`);\n      compassIcon.classList.add('shake');\n      setTimeout(() => {\n        compassIcon.classList.remove('shake');\n        isShaking = false;\n        processShakeQueue(); // Process the next shake in the queue\n      }, newDuration * 1000);\n    }\n    function switchVideoSource() {\n      const videoElement = document.getElementById('videoElement');\n      const transitionOverlay = document.getElementById('transitionOverlay');\n      const descriptionOverlay = document.getElementById('descriptionOverlay');\n      const currentSourceElement = videoElement.querySelector('source');\n      const currentSource = currentSourceElement.getAttribute('src');\n\n      // If nonPlayed is empty, refill it with a copy of videoSources\n      if (nonPlayed.length === 0) {\n        nonPlayed = [...videoSources];\n      }\n\n      // Get a new random index from nonPlayed\n      const newIndex = Math.floor(Math.random() * nonPlayed.length);\n\n      // Select the new video source using the new index\n      const newVideoSource = nonPlayed.splice(newIndex, 1)[0]; // Remove the selected video from nonPlayed\n      currentVideoSource = newVideoSource;\n\n      // Apply flip effect\n      if (!isMobilePhone()) {\n        descriptionOverlay.style.opacity = 0.5;\n      }\n      videoElement.classList.remove('flip2');\n      videoElement.classList.add('flip');\n      transitionOverlay.classList.remove('flip2');\n      transitionOverlay.classList.add('flip');\n      descriptionOverlay.classList.remove('flip2');\n      descriptionOverlay.classList.add('flip');\n\n      // Listen for the midpoint of the flip to change the source\n      videoElement.addEventListener('animationend', () => {\n        // Change the source and load the new video\n        videoElement.pause(); // Pause the video before changing the source\n        videoElement.querySelector('source').src = newVideoSource.src;\n        videoElement.load(); // Load the new video source\n\n        // Restart the flip animation for the second half of the transition\n        videoElement.classList.remove('flip');\n        transitionOverlay.classList.remove('flip');\n        descriptionOverlay.classList.remove('flip');\n\n        // Play the new video source\n        videoElement.play();\n        if (!videoElement.muted) {\n          const descriptionContentElement = document.getElementById('descriptionContent');\n          descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click to silence and fade!</p>`;\n        } else {\n          const descriptionContentElement = document.getElementById('descriptionContent');\n          descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click for color and sound!</p>`;\n        }\n\n        // Add the flip class back to complete the flip animation\n        videoElement.classList.add('flip2');\n        transitionOverlay.classList.add('flip2');\n        descriptionOverlay.classList.add('flip2');\n\n        // Ensure the flip class is removed after the animation completes\n        videoElement.addEventListener('animationend', () => {\n          videoElement.classList.remove('flip2');\n          transitionOverlay.classList.remove('flip2');\n          descriptionOverlay.classList.remove('flip2');\n          videoElement.setAttribute('class', newVideoSource.class);\n          descriptionOverlay.style.opacity = '';\n        }, {\n          once: true\n        });\n      }, {\n        once: true\n      });\n    }\n    function createHint() {\n      // Create a new <small> element\n      var hintParagraph = document.createElement(\"small\");\n\n      // Set the class and style of the new <p> element\n      hintParagraph.id = \"hint\";\n      hintParagraph.className = \"tipcolor-2\";\n      hintParagraph.style.float = \"right\";\n\n      // Set the text content of the new element\n      hintParagraph.textContent = 'Click the compass!';\n\n      // Find the element with the class \"header\"\n      var headerElement = document.querySelector(\".header-title\");\n\n      // Append the new <p> element to the header element\n      if (headerElement) {\n        headerElement.insertBefore(hintParagraph, headerElement.children[2] || null);\n      }\n    }\n    function compassFlash() {\n      // const hintParagraph = document.getElementById('hint');\n      // hintParagraph.classList.remove(\"tipcolor-2\");\n      // hintParagraph.classList.add(\"tipcolor-1\");\n\n      const compassIcon = document.getElementById('compassIcon');\n      compassIcon.style.transition = 'color 1.5s';\n\n      // Function to toggle between the classes\n      function toggleTipColor() {\n        compassIcon.classList.add(\"tipcolor-1\");\n        setTimeout(function () {\n          compassIcon.classList.remove(\"tipcolor-1\");\n        }, 800);\n      }\n\n      // Set an interval to toggle the classes every 4000ms if pressed is false\n      const hintFlash = setInterval(function () {\n        if (!pressed) {\n          toggleTipColor();\n        } else {\n          clearInterval(hintFlash); // Clear the interval\n        }\n      }, 2400);\n    }\n    function displayWelcomeContent() {\n      const titleElement = document.getElementById('welcomeTitle');\n      titleElement.style.transition = 'color 2s';\n      titleElement.style.color = ''; // Reset to original color\n      const subtitleText = document.getElementById('welcomeSubtitle').textContent;\n      const subtitleElement = document.getElementById('welcomeSubtitle');\n      subtitleElement.style.textAlign = 'justify'; // Change to justify after typing is complete\n      subtitleElement.style.textAlignLast = 'justify'; // Change to justify after typing is complete\n      subtitleElement.style.MozTextAlignLast = 'justify'; // Change to justify after typing is complete\n\n      typeWriterEffect(subtitleText, subtitleElement, 10, () => {\n        setTimeout(() => {\n          document.querySelectorAll('header *').forEach(element => {\n            element.style.transition = 'color 2s';\n            element.style.color = ''; // Reset to original color\n          });\n          document.querySelectorAll('footer *').forEach(element => {\n            element.style.transition = 'color 2s';\n            element.style.color = ''; // Reset to original color\n          });\n          const quoteElement = document.getElementById('welcomeQuote');\n          quoteElement.style.transition = 'color 2s';\n          quoteElement.style.color = ''; // Reset to original color\n\n          const overlay = document.getElementById('overlay');\n          overlay.style.pointerEvents = 'none'; // Disable pointer events to allow clicks\n\n          setTimeout(() => {\n            compassFlash();\n\n            // Reset the transition property after the color transition is complete\n            setTimeout(() => {\n              document.querySelectorAll('header *').forEach(element => {\n                element.style.transition = 'color 0.5s';\n              });\n              document.querySelectorAll('footer *').forEach(element => {\n                element.style.transition = 'color 0.5s';\n              });\n            }, 2000); // Match this duration with the color transition time (2 seconds)\n          }, 1000);\n        }, 1000);\n      });\n    }\n    function setupDescriptionOverlay() {\n      const videoElement = document.getElementById('videoElement');\n      const descriptionOverlay = document.querySelector('.description-overlay');\n      if (!isTouchScreen()) {\n        videoElement.addEventListener('mouseenter', () => {\n          descriptionOverlay.style.opacity = '0.5';\n        });\n        videoElement.addEventListener('mouseleave', () => {\n          descriptionOverlay.style.opacity = '0';\n        });\n      }\n    }\n    document.getElementById('compassIcon').addEventListener('click', function () {\n      if (canPlayVideo) {\n        switchVideoSource();\n      }\n      pressed = true;\n      const compassIcon = document.getElementById('compassIcon');\n      // const hintParagraph = document.getElementById('hint');\n      compassIcon.classList.remove(\"tipcolor-1\");\n      compassIcon.classList.remove(\"tipcolor-2\");\n      // try{\n      //     hintParagraph.classList.add(\"tipcolor-2\");\n      // } catch (error) {\n      //     console.error(error);\n      // } \n\n      pressCount++;\n\n      // Calculate new angle and duration based on the number of presses\n      let newAngle = Math.min(15 + pressCount * 6, maxAngle); // Increase angle by 6 degrees per press, up to maxAngle\n      let newDuration = Math.max(0.8 - pressCount * 0.06, minDuration); // Decrease duration by 0.06s per press, down to minDuration\n\n      shakeQueue.push({\n        newAngle,\n        newDuration\n      });\n      processShakeQueue();\n\n      // Clear any existing reset timeout\n      clearTimeout(resetTimeout);\n\n      // Set a new reset timeout for 0.5 seconds\n      resetTimeout = setTimeout(() => {\n        pressCount = 0;\n      }, 500);\n    });\n    if (window.location.pathname === '/index.html') {\n      // Check if the current page is not the homepage\n      const overlay = document.getElementById('overlay');\n      overlay.style.pointerEvents = 'none'; // Disable pointer events to allow clicks\n    }\n    changeVideoSource();\n    const videoElement = document.getElementById('videoElement');\n    const fallbackImage = document.getElementById('imageElement');\n    videoElement.style.opacity = '1';\n    // Function to handle video playback and related tasks\n    function handleVideoPlayback() {\n      // Create a flag to indicate whether the video is loaded successfully\n      let videoLoaded = false;\n\n      // Create a timeout to handle the scenario where loadeddata is not fired within 4 seconds\n      const loadTimeout = setTimeout(() => {\n        if (!videoLoaded) {\n          handleVideoError(new Error('Timeout waiting for video to load'));\n        }\n      }, 3000); // 3 seconds\n\n      // Function to handle video errors\n      function handleVideoError(error) {\n        console.error('Error:', error);\n        canPlayVideo = false;\n        videoElement.style.display = 'none';\n        fallbackImage.style.display = 'block';\n        fallbackImage.style.opacity = '1';\n        const checkDimensions = setInterval(function () {\n          if (imageElement.naturalWidth > 0 && imageElement.naturalHeight > 0) {\n            const aspectRatio = imageElement.naturalWidth / imageElement.naturalHeight;\n            // Check if the aspect ratio is approximately 9:16\n            if (Math.abs(aspectRatio - 9 / 16) < 0.01) {\n              clearInterval(checkDimensions);\n              updateTitles();\n              setTimeout(() => {\n                displayWelcomeContent();\n              }, 1000);\n            }\n          }\n        }, 100); // Check every 100ms until dimensions are available\n      }\n\n      // Listen for the loadeddata event to ensure the video is ready\n      videoElement.addEventListener('loadeddata', () => {\n        videoLoaded = true;\n        clearTimeout(loadTimeout); // Clear the timeout since the video is loaded\n\n        // Attempt to play the video\n        videoElement.play().then(() => {\n          const checkDimensions = setInterval(function () {\n            if (videoElement.videoWidth > 0 && videoElement.videoHeight > 0) {\n              const aspectRatio = videoElement.videoWidth / videoElement.videoHeight;\n              // Check if the aspect ratio is approximately 9:16\n              if (Math.abs(aspectRatio - 9 / 16) < 0.01) {\n                clearInterval(checkDimensions);\n\n                // createHint();\n                setupDescriptionOverlay();\n                updateTitles();\n                videoElement.addEventListener('click', () => {\n                  if (videoElement.muted) {\n                    videoElement.muted = false;\n                    videoElement.style.filter = 'grayscale(0%)';\n                    // Update the description content\n                    const descriptionContentElement = document.getElementById('descriptionContent');\n                    descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click to silence and fade!</p>`;\n                  } else {\n                    videoElement.muted = true;\n                    videoElement.style.filter = 'grayscale(85%)';\n                    // Update the description content\n                    const descriptionContentElement = document.getElementById('descriptionContent');\n                    descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click for color and sound!</p>`;\n                  }\n                });\n                preloadVideos();\n                videoTransition();\n                setTimeout(() => {\n                  displayWelcomeContent();\n                }, 1000);\n              }\n            }\n          }, 100); // Check every 100ms until dimensions are available\n        }).catch(error => {\n          // Handle errors that occur during video playback\n          handleVideoError(error);\n        });\n      }, {\n        once: true\n      });\n\n      // Initial video load attempt\n      try {\n        videoElement.load();\n      } catch (error) {\n        handleVideoError(error);\n      }\n    }\n\n    // Call the function to handle video playback\n    handleVideoPlayback();\n    window.onresize = () => {\n      // Clear any existing timeout to interrupt the previous typing effect\n      if (currentTimeoutId) {\n        clearTimeout(currentTimeoutId);\n      }\n      console.log(\"resize\");\n      updateTitles();\n      const isDarkMode = document.body.classList.contains('dark-mode');\n      const subtitleElement = document.getElementById('welcomeSubtitle');\n      const textColor = isDarkMode ? '#fafafa' : '#252525'; // Change text color based on theme\n      subtitleElement.style.transition = 'color 0s';\n      subtitleElement.style.color = textColor;\n      subtitleElement.style.transition = '';\n      subtitleElement.style.textAlign = 'justify';\n      subtitleElement.style.textAlignLast = 'justify';\n      subtitleElement.style.MozTextAlignLast = 'justify';\n      document.querySelectorAll('header *').forEach(element => {\n        element.style.transition = 'color 2s';\n        element.style.color = ''; // Reset to original color\n      });\n      document.querySelectorAll('footer *').forEach(element => {\n        element.style.transition = 'color 2s';\n        element.style.color = ''; // Reset to original color\n      });\n      const quoteElement = document.getElementById('welcomeQuote');\n      quoteElement.style.transition = 'color 2s';\n      quoteElement.style.color = ''; // Reset to original color\n\n      const overlay = document.getElementById('overlay');\n      overlay.style.pointerEvents = 'none'; // Disable pointer events to allow clicks\n    };\n  }\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n  } else {\n    // The DOMContentLoaded event has already fired\n    onDOMContentLoaded();\n  }\n}","map":{"version":3,"names":["initScript","onDOMContentLoaded","console","log","shakeQueue","isShaking","pressCount","pressed","resetTimeout","maxAngle","minDuration","canPlayVideo","currentTimeoutId","videoSources","src","class","description","nonPlayed","currentVideoSource","isMobilePhone","userAgent","navigator","vendor","window","opera","test","isTouchScreen","changeVideoSource","newIndex","Math","floor","random","length","source","splice","videoElement","document","getElementById","currentSourceElement","querySelector","setAttribute","load","descriptionContentElement","innerHTML","preloadVideos","forEach","videoData","video","createElement","preload","autoplay","loop","muted","style","display","body","appendChild","updateSubtitle","subtitleElement","isMobile","matchMedia","matches","textContent","getTextWidth","text","font","canvas","context","getContext","metrics","measureText","width","getCssStyle","element","prop","getComputedStyle","getPropertyValue","getCanvasFont","el","fontWeight","fontSize","fontFamily","adjustTitle","imageElement","titleElement","compassIcon","mediaElement","mediaHeight","clientHeight","availableWidth","clientWidth","titleFontSize","iconScaleFactor","textWidth","replace","adjustSubtitle","subtitleFontSize","totalHeight","subtitleLineHeight","lineHeight","updateTitles","isSmallScreen","typeWriterEffect","delay","callback","clearTimeout","index","spans","i","span","className","color","push","reveal","isDarkMode","classList","contains","textColor","transition","setTimeout","videoTransition","fadeOutApplied","transitionOverlay","addEventListener","timeLeft","duration","currentTime","opacity","processShakeQueue","newAngle","newDuration","shift","setProperty","add","remove","switchVideoSource","descriptionOverlay","currentSource","getAttribute","newVideoSource","pause","play","once","createHint","hintParagraph","id","float","headerElement","insertBefore","children","compassFlash","toggleTipColor","hintFlash","setInterval","clearInterval","displayWelcomeContent","subtitleText","textAlign","textAlignLast","MozTextAlignLast","querySelectorAll","quoteElement","overlay","pointerEvents","setupDescriptionOverlay","min","max","location","pathname","fallbackImage","handleVideoPlayback","videoLoaded","loadTimeout","handleVideoError","Error","error","checkDimensions","naturalWidth","naturalHeight","aspectRatio","abs","then","videoWidth","videoHeight","filter","catch","onresize","readyState"],"sources":["/Users/henry/Desktop/personalpage/src/assets/js/home.js"],"sourcesContent":["export function initScript() {\n    function onDOMContentLoaded() {\n        console.log('DOM fully loaded and parsed');\n        // Your script logic here\n        let shakeQueue = [];\n        let isShaking = false;\n        let pressCount = 0;\n        let pressed = false;\n        let resetTimeout;\n        const maxAngle = 360; // Maximum angle to prevent excessive shaking\n        const minDuration = 0.2; // Minimum duration to prevent excessive speed\n    \n        let canPlayVideo = true;\n    \n        let currentTimeoutId; // Variable to store the current timeout ID\n    \n        const videoSources = [\n            { src: \"/assets/vid/home1.mp4\", class: \"homevideo1\", description: \"Sunbathing, beers, and ocean breezes on the Mediterranean!\" },\n            { src: \"/assets/vid/home2.mp4\", class: \"homevideo2\", description: \"Ducks enjoying a swim by the oceanside, weaving between the boats.\" },\n            { src: \"/assets/vid/home3.mp4\", class: \"homevideo3\", description: \"A cat strolling on the ancient stone steps, shot in Athens.\" }\n        ];\n    \n        let nonPlayed = [...videoSources];\n    \n        let currentVideoSource = videoSources[0];\n    \n        function isMobilePhone() {\n            const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n            return /android|iPhone|iPod/i.test(userAgent);\n        }\n    \n        function isTouchScreen(){\n            const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n            return /android|iPhone|iPad|iPod/i.test(userAgent);\n        }\n    \n        function changeVideoSource() {\n            // Get a new random index from nonPlayed\n            const newIndex = Math.floor(Math.random() * nonPlayed.length);\n    \n            // Select the new video source using the new index\n            const source = nonPlayed.splice(newIndex, 1)[0]; // Remove the selected video from nonPlayed\n            currentVideoSource = source;\n    \n            const videoElement = document.getElementById('videoElement');\n            const currentSourceElement = videoElement.querySelector('source');\n            currentSourceElement.setAttribute('src', source.src)\n            videoElement.setAttribute('class', source.class);\n            videoElement.load();\n    \n            // Update the description content\n            const descriptionContentElement = document.getElementById('descriptionContent');\n            descriptionContentElement.innerHTML = `${source.description}<br><p>Click for color and sound!</p>`;\n        }\n    \n        function preloadVideos() {\n            videoSources.forEach(videoData => {\n                const video = document.createElement('video');\n                video.src = videoData.src;\n                video.preload = 'auto';\n                video.autoplay = true;\n                video.loop = true;\n                video.muted = true;\n                video.style.display = 'none'; // Hide the video element\n                document.body.appendChild(video);\n            });\n        }\n    \n        function updateSubtitle() {\n            const subtitleElement = document.getElementById('welcomeSubtitle');\n            const isMobile = window.matchMedia(\"(max-width: 768px)\").matches;\n    \n            if (isMobile) {\n                subtitleElement.textContent = \"Hello! I'm Han-yu, a junior at HKU, majoring in AI. I love to explore new places and code apps. I'm ready to share my journey with you!\";\n            } else {\n                subtitleElement.textContent = \"Hello! I'm Han-yu (Henry), a junior at HKU, majoring in Applied AI. I love to explore new places and code apps. I'm excited to have you here and share my journey with you!\";\n            }\n        }\n    \n        function getTextWidth(text, font) {\n            const canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement(\"canvas\"));\n            const context = canvas.getContext(\"2d\");\n            context.font = font;\n            const metrics = context.measureText(text);\n            return metrics.width;\n        }\n    \n        function getCssStyle(element, prop) {\n            return window.getComputedStyle(element, null).getPropertyValue(prop);\n        }\n    \n        function getCanvasFont(el) {\n            const fontWeight = getCssStyle(el, 'font-weight') || 'normal';\n            const fontSize = getCssStyle(el, 'font-size') || '16px';\n            const fontFamily = getCssStyle(el, 'font-family') || 'Times New Roman';\n            return `${fontWeight} ${fontSize} ${fontFamily}`;\n        }\n    \n        function adjustTitle() {\n            const videoElement = document.getElementById('videoElement');\n            const imageElement = document.getElementById('imageElement');\n            const titleElement = document.getElementById('welcomeTitle');\n            const subtitleElement = document.getElementById('welcomeSubtitle');\n            const compassIcon = document.getElementById('compassIcon');\n    \n            const mediaElement = videoElement.style.display !== 'none' ? videoElement : imageElement;\n            const mediaHeight = mediaElement.clientHeight;\n            const availableWidth = document.querySelector('.welcome-text').clientWidth;\n    \n            // Adjust the font size and line height of the title to fit the width\n            let titleFontSize = 1; // Start with a smaller font size\n            titleElement.style.fontSize = `${titleFontSize}em`;\n            \n            let iconScaleFactor = 0.3; // Scale factor to adjust the icon size relative to the text\n            compassIcon.style.fontSize = `${titleFontSize * iconScaleFactor}em`;\n            \n            let textWidth = getTextWidth(titleElement.textContent.replace('O', ''), getCanvasFont(titleElement)) + compassIcon.clientWidth;\n            while (textWidth < availableWidth && titleFontSize < 5) { // Constrain max font size to 5em\n                titleFontSize += 0.1;\n                titleElement.style.fontSize = `${titleFontSize}em`;\n                compassIcon.style.fontSize = `${titleFontSize * iconScaleFactor}em`;\n                textWidth = getTextWidth(titleElement.textContent.replace('O', ''), getCanvasFont(titleElement)) + compassIcon.clientWidth;\n            }\n    \n            while (textWidth > availableWidth && titleFontSize > 0.5) { // Constrain min font size to 0.5em\n                titleFontSize -= 0.1;\n                titleElement.style.fontSize = `${titleFontSize}em`;\n                compassIcon.style.fontSize = `${titleFontSize * iconScaleFactor}em`;\n                textWidth = getTextWidth(titleElement.textContent.replace('O', ''), getCanvasFont(titleElement)) + compassIcon.clientWidth;\n            }\n        }\n    \n        function adjustSubtitle() {\n            const videoElement = document.getElementById('videoElement');\n            const imageElement = document.getElementById('imageElement');\n            const titleElement = document.getElementById('welcomeTitle');\n            const subtitleElement = document.getElementById('welcomeSubtitle');\n            const compassIcon = document.getElementById('compassIcon');\n    \n            const mediaElement = videoElement.style.display !== 'none' ? videoElement : imageElement;\n            const mediaHeight = mediaElement.clientHeight;\n            const availableWidth = document.querySelector('.welcome-text').clientWidth;\n    \n            // Fix the title font size and adjust the subtitle to match the height of the video\n            let subtitleFontSize = 1;\n            subtitleElement.style.fontSize = `${subtitleFontSize}em`;\n            let totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n    \n            while (totalHeight < mediaHeight && subtitleFontSize < 3) { // Constrain max font size to 3em\n                subtitleFontSize += 0.01;\n                subtitleElement.style.fontSize = `${subtitleFontSize}em`;\n                totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n            }\n    \n            // Reduce font size and line height if the total height exceeds the video height\n            while (totalHeight > mediaHeight && subtitleFontSize > 0.5) { // Ensure font size does not go below 0.5em\n                subtitleFontSize -= 0.01;\n                subtitleElement.style.fontSize = `${subtitleFontSize}em`;\n                totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n            }\n    \n            // Adjust the line height of the subtitle element to fit within the media height\n            let subtitleLineHeight = 1.4; // Starting line height\n            subtitleElement.style.lineHeight = subtitleLineHeight;\n            totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n    \n            while (totalHeight < mediaHeight && subtitleLineHeight < 2) { // Constrain max line height to 2\n                subtitleLineHeight += 0.1;\n                subtitleElement.style.lineHeight = subtitleLineHeight;\n                totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n            }\n    \n            while (totalHeight > mediaHeight && subtitleLineHeight > 1) { // Ensure line height does not go below 1\n                subtitleLineHeight -= 0.1;\n                subtitleElement.style.lineHeight = subtitleLineHeight;\n                totalHeight = titleElement.clientHeight + subtitleElement.clientHeight;\n            }\n        }\n    \n        function updateTitles() {\n            updateSubtitle();\n            adjustTitle();\n            const isSmallScreen = window.matchMedia(\"(max-width: 600px)\").matches;\n            if (isSmallScreen) {\n                document.getElementById('welcomeTitle').style.fontSize = '2em';\n                document.getElementById('compassIcon').style.fontSize = '1.1em';\n            }\n            adjustSubtitle();\n        }\n    \n        function typeWriterEffect(text, element, delay = 100, callback) {\n            // Clear any existing timeout to interrupt the previous typing effect\n            if (currentTimeoutId) {\n                clearTimeout(currentTimeoutId);\n            }\n    \n            element.innerHTML = '';\n            let index = 0;\n            const spans = [];\n    \n            // Step 1: Create a span for each character\n            for (let i = 0; i < text.length; i++) {\n                const span = document.createElement('span');\n                span.className = 'typed';\n                span.style.color = 'transparent'; // Initially transparent\n                span.textContent = text[i];\n                element.appendChild(span);\n                spans.push(span);\n            }\n    \n            // Step 2: Turn each span into the text color one by one\n            function reveal() {\n                if (index < spans.length) {\n                    const isDarkMode = document.body.classList.contains('dark-mode');\n                    const textColor = isDarkMode ? '#fafafa' : '#252525'; // Change text color based on theme\n                    \n                    spans[index].style.transition = `color 2s`;\n                    spans[index].style.color = textColor;\n                    index++;\n                    currentTimeoutId = setTimeout(reveal, delay); // Store the timeout ID\n                } else {\n                    if (callback) callback();\n                }\n            }\n    \n            reveal();\n        }\n    \n        function videoTransition() {\n            let fadeOutApplied = false;\n            const transitionOverlay = document.getElementById('transitionOverlay');\n            transitionOverlay.style.transition = 'opacity 0.3s ease-in-out';\n    \n            videoElement.addEventListener('timeupdate', () => {\n                const timeLeft = videoElement.duration - videoElement.currentTime;\n                if (timeLeft < 0.6 && !fadeOutApplied) { // Adjust the time threshold as needed\n                    transitionOverlay.style.opacity = '1';\n                    fadeOutApplied = true;\n                }\n            });\n    \n            videoElement.addEventListener('timeupdate', () => {\n                if (videoElement.currentTime >0.2 && videoElement.currentTime <1.2 ) {\n                    transitionOverlay.style.opacity = '0';\n                    fadeOutApplied = false; // Reset the flag when the video starts playing again\n                }\n            });\n    \n            // videoElement.addEventListener('playing', () => {\n            //     transitionOverlay.style.opacity = '0';\n            //     fadeOutApplied = false; // Reset the flag when the video starts playing again\n            // });\n        }\n    \n        function processShakeQueue() {\n            if (shakeQueue.length === 0 || isShaking) return;\n            \n            isShaking = true;\n            const { newAngle, newDuration } = shakeQueue.shift();\n            \n            const compassIcon = document.getElementById('compassIcon');\n            compassIcon.style.setProperty('--shake-angle', `${newAngle}deg`);\n            compassIcon.style.setProperty('--shake-duration', `${newDuration}s`);\n            \n            compassIcon.classList.add('shake');\n            \n            setTimeout(() => {\n                compassIcon.classList.remove('shake');\n                isShaking = false;\n                processShakeQueue(); // Process the next shake in the queue\n            }, newDuration * 1000);\n        }\n    \n        function switchVideoSource() {\n            const videoElement = document.getElementById('videoElement');\n            const transitionOverlay = document.getElementById('transitionOverlay');\n            const descriptionOverlay = document.getElementById('descriptionOverlay');\n            const currentSourceElement = videoElement.querySelector('source');\n            const currentSource = currentSourceElement.getAttribute('src');\n    \n            // If nonPlayed is empty, refill it with a copy of videoSources\n            if (nonPlayed.length === 0) {\n                nonPlayed = [...videoSources];\n            }\n    \n            // Get a new random index from nonPlayed\n            const newIndex = Math.floor(Math.random() * nonPlayed.length);\n    \n            // Select the new video source using the new index\n            const newVideoSource = nonPlayed.splice(newIndex, 1)[0]; // Remove the selected video from nonPlayed\n            currentVideoSource = newVideoSource;\n    \n            // Apply flip effect\n            if (!isMobilePhone()) {\n                descriptionOverlay.style.opacity = 0.5;\n            }\n            videoElement.classList.remove('flip2');\n            videoElement.classList.add('flip');\n            transitionOverlay.classList.remove('flip2');\n            transitionOverlay.classList.add('flip');\n            descriptionOverlay.classList.remove('flip2');\n            descriptionOverlay.classList.add('flip');\n    \n            // Listen for the midpoint of the flip to change the source\n            videoElement.addEventListener('animationend', () => {\n                // Change the source and load the new video\n                videoElement.pause(); // Pause the video before changing the source\n                videoElement.querySelector('source').src = newVideoSource.src;\n                videoElement.load(); // Load the new video source\n    \n                // Restart the flip animation for the second half of the transition\n                videoElement.classList.remove('flip');\n                transitionOverlay.classList.remove('flip');\n                descriptionOverlay.classList.remove('flip');\n    \n                // Play the new video source\n                videoElement.play();\n    \n                if (!videoElement.muted) {\n                    const descriptionContentElement = document.getElementById('descriptionContent');\n                    descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click to silence and fade!</p>`;\n                } else {\n                    const descriptionContentElement = document.getElementById('descriptionContent');\n                    descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click for color and sound!</p>`;\n                }\n    \n                // Add the flip class back to complete the flip animation\n                videoElement.classList.add('flip2');\n                transitionOverlay.classList.add('flip2');\n                descriptionOverlay.classList.add('flip2');\n    \n                // Ensure the flip class is removed after the animation completes\n                videoElement.addEventListener('animationend', () => {\n                    videoElement.classList.remove('flip2');\n                    transitionOverlay.classList.remove('flip2');\n                    descriptionOverlay.classList.remove('flip2');\n                    videoElement.setAttribute('class', newVideoSource.class);\n                    descriptionOverlay.style.opacity = '';\n                }, { once: true });\n            }, { once: true });\n        }\n    \n        function createHint() {\n            // Create a new <small> element\n            var hintParagraph = document.createElement(\"small\");\n    \n            // Set the class and style of the new <p> element\n            hintParagraph.id = \"hint\";\n            hintParagraph.className = \"tipcolor-2\";\n            hintParagraph.style.float = \"right\";\n    \n            // Set the text content of the new element\n            hintParagraph.textContent = 'Click the compass!';\n    \n            // Find the element with the class \"header\"\n            var headerElement = document.querySelector(\".header-title\");\n    \n            // Append the new <p> element to the header element\n            if (headerElement) {\n                headerElement.insertBefore(hintParagraph, headerElement.children[2] || null);\n            }\n        }\n    \n        function compassFlash() {\n            // const hintParagraph = document.getElementById('hint');\n            // hintParagraph.classList.remove(\"tipcolor-2\");\n            // hintParagraph.classList.add(\"tipcolor-1\");\n    \n            const compassIcon = document.getElementById('compassIcon');\n            compassIcon.style.transition = 'color 1.5s'\n    \n            // Function to toggle between the classes\n            function toggleTipColor() {\n                compassIcon.classList.add(\"tipcolor-1\");\n                setTimeout(function() {\n                    compassIcon.classList.remove(\"tipcolor-1\");\n                }, 800);\n            }\n    \n            // Set an interval to toggle the classes every 4000ms if pressed is false\n            const hintFlash = setInterval(function() {\n                if (!pressed) {\n                    toggleTipColor();\n                } else {\n                    clearInterval(hintFlash); // Clear the interval\n                }\n            }, 2400);\n        }\n    \n        function displayWelcomeContent() {\n            const titleElement = document.getElementById('welcomeTitle');\n            titleElement.style.transition = 'color 2s';\n            titleElement.style.color = ''; // Reset to original color\n            const subtitleText = document.getElementById('welcomeSubtitle').textContent;\n            const subtitleElement = document.getElementById('welcomeSubtitle');\n            subtitleElement.style.textAlign = 'justify'; // Change to justify after typing is complete\n            subtitleElement.style.textAlignLast = 'justify'; // Change to justify after typing is complete\n            subtitleElement.style.MozTextAlignLast = 'justify'; // Change to justify after typing is complete\n    \n            typeWriterEffect(subtitleText, subtitleElement, 10, () => {\n                setTimeout(() => {\n                    document.querySelectorAll('header *').forEach(element => {\n                        element.style.transition = 'color 2s';\n                        element.style.color = ''; // Reset to original color\n                    });\n                    document.querySelectorAll('footer *').forEach(element => {\n                        element.style.transition = 'color 2s';\n                        element.style.color = ''; // Reset to original color\n                    });\n                    const quoteElement = document.getElementById('welcomeQuote');\n                    quoteElement.style.transition = 'color 2s';\n                    quoteElement.style.color = ''; // Reset to original color\n    \n                    const overlay = document.getElementById('overlay');\n                    overlay.style.pointerEvents = 'none'; // Disable pointer events to allow clicks\n    \n                    setTimeout(() => {\n                        compassFlash();\n    \n                        // Reset the transition property after the color transition is complete\n                        setTimeout(() => {\n                            document.querySelectorAll('header *').forEach(element => {\n                                element.style.transition = 'color 0.5s';\n                            });\n                            document.querySelectorAll('footer *').forEach(element => {\n                                element.style.transition = 'color 0.5s';\n                            });\n                        }, 2000); // Match this duration with the color transition time (2 seconds)\n                    }, 1000);\n                }, 1000);\n            });\n        }\n    \n        function setupDescriptionOverlay() {\n            const videoElement = document.getElementById('videoElement');\n            const descriptionOverlay = document.querySelector('.description-overlay');\n    \n            if (!isTouchScreen()) {\n                videoElement.addEventListener('mouseenter', () => {\n                    descriptionOverlay.style.opacity = '0.5';\n                });\n    \n                videoElement.addEventListener('mouseleave', () => {\n                    descriptionOverlay.style.opacity = '0';\n                });\n            }\n        }\n    \n        document.getElementById('compassIcon').addEventListener('click', function() {\n    \n            if (canPlayVideo) {\n                switchVideoSource();\n            }\n    \n            pressed = true;\n            const compassIcon = document.getElementById('compassIcon');\n            // const hintParagraph = document.getElementById('hint');\n            compassIcon.classList.remove(\"tipcolor-1\");\n            compassIcon.classList.remove(\"tipcolor-2\");\n            // try{\n            //     hintParagraph.classList.add(\"tipcolor-2\");\n            // } catch (error) {\n            //     console.error(error);\n            // } \n    \n            pressCount++;\n            \n            // Calculate new angle and duration based on the number of presses\n            let newAngle = Math.min(15 + pressCount * 6, maxAngle); // Increase angle by 6 degrees per press, up to maxAngle\n            let newDuration = Math.max(0.8 - pressCount * 0.06, minDuration); // Decrease duration by 0.06s per press, down to minDuration\n            \n            shakeQueue.push({ newAngle, newDuration });\n            processShakeQueue();\n            \n            // Clear any existing reset timeout\n            clearTimeout(resetTimeout);\n            \n            // Set a new reset timeout for 0.5 seconds\n            resetTimeout = setTimeout(() => {\n                pressCount = 0;\n            }, 500);\n        });\n    \n        if (window.location.pathname === '/index.html') { // Check if the current page is not the homepage\n            const overlay = document.getElementById('overlay');\n            overlay.style.pointerEvents = 'none'; // Disable pointer events to allow clicks\n        }\n    \n        changeVideoSource();\n    \n        const videoElement = document.getElementById('videoElement');\n        const fallbackImage = document.getElementById('imageElement');\n        videoElement.style.opacity = '1';\n        // Function to handle video playback and related tasks\n        function handleVideoPlayback() {\n            // Create a flag to indicate whether the video is loaded successfully\n            let videoLoaded = false;\n    \n            // Create a timeout to handle the scenario where loadeddata is not fired within 4 seconds\n            const loadTimeout = setTimeout(() => {\n                if (!videoLoaded) {\n                    handleVideoError(new Error('Timeout waiting for video to load'));\n                }\n            }, 3000); // 3 seconds\n    \n            // Function to handle video errors\n            function handleVideoError(error) {\n                console.error('Error:', error);\n                canPlayVideo = false;\n                videoElement.style.display = 'none';\n                fallbackImage.style.display = 'block';\n                fallbackImage.style.opacity = '1';\n                const checkDimensions = setInterval(function() {\n                    if (imageElement.naturalWidth > 0 && imageElement.naturalHeight > 0) {\n                        const aspectRatio = imageElement.naturalWidth / imageElement.naturalHeight;\n                        // Check if the aspect ratio is approximately 9:16\n                        if (Math.abs(aspectRatio - (9 / 16)) < 0.01) {\n                            clearInterval(checkDimensions);\n    \n                            updateTitles();\n    \n                            setTimeout(() => {\n                                displayWelcomeContent();\n                            }, 1000);\n                        }\n                    }\n                }, 100); // Check every 100ms until dimensions are available\n            }\n    \n            // Listen for the loadeddata event to ensure the video is ready\n            videoElement.addEventListener('loadeddata', () => {\n                videoLoaded = true;\n                clearTimeout(loadTimeout); // Clear the timeout since the video is loaded\n    \n                // Attempt to play the video\n                videoElement.play().then(() => {\n                    const checkDimensions = setInterval(function() {\n                        if (videoElement.videoWidth > 0 && videoElement.videoHeight > 0) {\n                            const aspectRatio = videoElement.videoWidth / videoElement.videoHeight;\n                            // Check if the aspect ratio is approximately 9:16\n                            if (Math.abs(aspectRatio - (9 / 16)) < 0.01) {\n                                clearInterval(checkDimensions);\n    \n                                // createHint();\n                                setupDescriptionOverlay();\n                                updateTitles();\n    \n                                videoElement.addEventListener('click', () => {\n                                    if (videoElement.muted) {\n                                        videoElement.muted = false;\n                                        videoElement.style.filter = 'grayscale(0%)';\n                                        // Update the description content\n                                        const descriptionContentElement = document.getElementById('descriptionContent');\n                                        descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click to silence and fade!</p>`;\n                                    } else {\n                                        videoElement.muted = true;\n                                        videoElement.style.filter = 'grayscale(85%)';\n                                        // Update the description content\n                                        const descriptionContentElement = document.getElementById('descriptionContent');\n                                        descriptionContentElement.innerHTML = `${currentVideoSource.description}<br><p>Click for color and sound!</p>`;\n                                    }\n                                });\n    \n                                preloadVideos();\n                                videoTransition();\n    \n                                setTimeout(() => {\n                                    displayWelcomeContent();\n                                }, 1000);\n                            }\n                        }\n                    }, 100); // Check every 100ms until dimensions are available\n                }).catch((error) => {\n                    // Handle errors that occur during video playback\n                    handleVideoError(error);\n                });\n            }, { once: true });\n    \n            // Initial video load attempt\n            try {\n                videoElement.load();\n            } catch (error) {\n                handleVideoError(error);\n            }\n        }\n    \n        // Call the function to handle video playback\n        handleVideoPlayback();\n    \n        window.onresize = () => {\n            // Clear any existing timeout to interrupt the previous typing effect\n            if (currentTimeoutId) {\n                clearTimeout(currentTimeoutId);\n            }\n            console.log(\"resize\")\n            updateTitles();\n            const isDarkMode = document.body.classList.contains('dark-mode');\n            const subtitleElement = document.getElementById('welcomeSubtitle');\n            const textColor = isDarkMode ? '#fafafa' : '#252525'; // Change text color based on theme\n            subtitleElement.style.transition = 'color 0s';\n            subtitleElement.style.color = textColor;\n            subtitleElement.style.transition = '';\n            subtitleElement.style.textAlign = 'justify';\n            subtitleElement.style.textAlignLast = 'justify';\n            subtitleElement.style.MozTextAlignLast = 'justify';\n            document.querySelectorAll('header *').forEach(element => {\n                element.style.transition = 'color 2s';\n                element.style.color = ''; // Reset to original color\n            });\n            document.querySelectorAll('footer *').forEach(element => {\n                element.style.transition = 'color 2s';\n                element.style.color = ''; // Reset to original color\n            });\n            const quoteElement = document.getElementById('welcomeQuote');\n            quoteElement.style.transition = 'color 2s';\n            quoteElement.style.color = ''; // Reset to original color\n        \n            const overlay = document.getElementById('overlay');\n            overlay.style.pointerEvents = 'none'; // Disable pointer events to allow clicks\n        };\n    }\n\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n    } else {\n        // The DOMContentLoaded event has already fired\n        onDOMContentLoaded();\n    }\n}"],"mappings":";AAAA,OAAO,SAASA,UAAUA,CAAA,EAAG;EACzB,SAASC,kBAAkBA,CAAA,EAAG;IAC1BC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC1C;IACA,IAAIC,UAAU,GAAG,EAAE;IACnB,IAAIC,SAAS,GAAG,KAAK;IACrB,IAAIC,UAAU,GAAG,CAAC;IAClB,IAAIC,OAAO,GAAG,KAAK;IACnB,IAAIC,YAAY;IAChB,MAAMC,QAAQ,GAAG,GAAG,CAAC,CAAC;IACtB,MAAMC,WAAW,GAAG,GAAG,CAAC,CAAC;;IAEzB,IAAIC,YAAY,GAAG,IAAI;IAEvB,IAAIC,gBAAgB,CAAC,CAAC;;IAEtB,MAAMC,YAAY,GAAG,CACjB;MAAEC,GAAG,EAAE,uBAAuB;MAAEC,KAAK,EAAE,YAAY;MAAEC,WAAW,EAAE;IAA6D,CAAC,EAChI;MAAEF,GAAG,EAAE,uBAAuB;MAAEC,KAAK,EAAE,YAAY;MAAEC,WAAW,EAAE;IAAqE,CAAC,EACxI;MAAEF,GAAG,EAAE,uBAAuB;MAAEC,KAAK,EAAE,YAAY;MAAEC,WAAW,EAAE;IAA8D,CAAC,CACpI;IAED,IAAIC,SAAS,GAAG,CAAC,GAAGJ,YAAY,CAAC;IAEjC,IAAIK,kBAAkB,GAAGL,YAAY,CAAC,CAAC,CAAC;IAExC,SAASM,aAAaA,CAAA,EAAG;MACrB,MAAMC,SAAS,GAAGC,SAAS,CAACD,SAAS,IAAIC,SAAS,CAACC,MAAM,IAAIC,MAAM,CAACC,KAAK;MACzE,OAAO,sBAAsB,CAACC,IAAI,CAACL,SAAS,CAAC;IACjD;IAEA,SAASM,aAAaA,CAAA,EAAE;MACpB,MAAMN,SAAS,GAAGC,SAAS,CAACD,SAAS,IAAIC,SAAS,CAACC,MAAM,IAAIC,MAAM,CAACC,KAAK;MACzE,OAAO,2BAA2B,CAACC,IAAI,CAACL,SAAS,CAAC;IACtD;IAEA,SAASO,iBAAiBA,CAAA,EAAG;MACzB;MACA,MAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGd,SAAS,CAACe,MAAM,CAAC;;MAE7D;MACA,MAAMC,MAAM,GAAGhB,SAAS,CAACiB,MAAM,CAACN,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjDV,kBAAkB,GAAGe,MAAM;MAE3B,MAAME,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAMC,oBAAoB,GAAGH,YAAY,CAACI,aAAa,CAAC,QAAQ,CAAC;MACjED,oBAAoB,CAACE,YAAY,CAAC,KAAK,EAAEP,MAAM,CAACnB,GAAG,CAAC;MACpDqB,YAAY,CAACK,YAAY,CAAC,OAAO,EAAEP,MAAM,CAAClB,KAAK,CAAC;MAChDoB,YAAY,CAACM,IAAI,CAAC,CAAC;;MAEnB;MACA,MAAMC,yBAAyB,GAAGN,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;MAC/EK,yBAAyB,CAACC,SAAS,GAAG,GAAGV,MAAM,CAACjB,WAAW,uCAAuC;IACtG;IAEA,SAAS4B,aAAaA,CAAA,EAAG;MACrB/B,YAAY,CAACgC,OAAO,CAACC,SAAS,IAAI;QAC9B,MAAMC,KAAK,GAAGX,QAAQ,CAACY,aAAa,CAAC,OAAO,CAAC;QAC7CD,KAAK,CAACjC,GAAG,GAAGgC,SAAS,CAAChC,GAAG;QACzBiC,KAAK,CAACE,OAAO,GAAG,MAAM;QACtBF,KAAK,CAACG,QAAQ,GAAG,IAAI;QACrBH,KAAK,CAACI,IAAI,GAAG,IAAI;QACjBJ,KAAK,CAACK,KAAK,GAAG,IAAI;QAClBL,KAAK,CAACM,KAAK,CAACC,OAAO,GAAG,MAAM,CAAC,CAAC;QAC9BlB,QAAQ,CAACmB,IAAI,CAACC,WAAW,CAACT,KAAK,CAAC;MACpC,CAAC,CAAC;IACN;IAEA,SAASU,cAAcA,CAAA,EAAG;MACtB,MAAMC,eAAe,GAAGtB,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;MAClE,MAAMsB,QAAQ,GAAGpC,MAAM,CAACqC,UAAU,CAAC,oBAAoB,CAAC,CAACC,OAAO;MAEhE,IAAIF,QAAQ,EAAE;QACVD,eAAe,CAACI,WAAW,GAAG,yIAAyI;MAC3K,CAAC,MAAM;QACHJ,eAAe,CAACI,WAAW,GAAG,6KAA6K;MAC/M;IACJ;IAEA,SAASC,YAAYA,CAACC,IAAI,EAAEC,IAAI,EAAE;MAC9B,MAAMC,MAAM,GAAGH,YAAY,CAACG,MAAM,KAAKH,YAAY,CAACG,MAAM,GAAG9B,QAAQ,CAACY,aAAa,CAAC,QAAQ,CAAC,CAAC;MAC9F,MAAMmB,OAAO,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;MACvCD,OAAO,CAACF,IAAI,GAAGA,IAAI;MACnB,MAAMI,OAAO,GAAGF,OAAO,CAACG,WAAW,CAACN,IAAI,CAAC;MACzC,OAAOK,OAAO,CAACE,KAAK;IACxB;IAEA,SAASC,WAAWA,CAACC,OAAO,EAAEC,IAAI,EAAE;MAChC,OAAOnD,MAAM,CAACoD,gBAAgB,CAACF,OAAO,EAAE,IAAI,CAAC,CAACG,gBAAgB,CAACF,IAAI,CAAC;IACxE;IAEA,SAASG,aAAaA,CAACC,EAAE,EAAE;MACvB,MAAMC,UAAU,GAAGP,WAAW,CAACM,EAAE,EAAE,aAAa,CAAC,IAAI,QAAQ;MAC7D,MAAME,QAAQ,GAAGR,WAAW,CAACM,EAAE,EAAE,WAAW,CAAC,IAAI,MAAM;MACvD,MAAMG,UAAU,GAAGT,WAAW,CAACM,EAAE,EAAE,aAAa,CAAC,IAAI,iBAAiB;MACtE,OAAO,GAAGC,UAAU,IAAIC,QAAQ,IAAIC,UAAU,EAAE;IACpD;IAEA,SAASC,WAAWA,CAAA,EAAG;MACnB,MAAM/C,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAM8C,YAAY,GAAG/C,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAM+C,YAAY,GAAGhD,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAMqB,eAAe,GAAGtB,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;MAClE,MAAMgD,WAAW,GAAGjD,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;MAE1D,MAAMiD,YAAY,GAAGnD,YAAY,CAACkB,KAAK,CAACC,OAAO,KAAK,MAAM,GAAGnB,YAAY,GAAGgD,YAAY;MACxF,MAAMI,WAAW,GAAGD,YAAY,CAACE,YAAY;MAC7C,MAAMC,cAAc,GAAGrD,QAAQ,CAACG,aAAa,CAAC,eAAe,CAAC,CAACmD,WAAW;;MAE1E;MACA,IAAIC,aAAa,GAAG,CAAC,CAAC,CAAC;MACvBP,YAAY,CAAC/B,KAAK,CAAC2B,QAAQ,GAAG,GAAGW,aAAa,IAAI;MAElD,IAAIC,eAAe,GAAG,GAAG,CAAC,CAAC;MAC3BP,WAAW,CAAChC,KAAK,CAAC2B,QAAQ,GAAG,GAAGW,aAAa,GAAGC,eAAe,IAAI;MAEnE,IAAIC,SAAS,GAAG9B,YAAY,CAACqB,YAAY,CAACtB,WAAW,CAACgC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAEjB,aAAa,CAACO,YAAY,CAAC,CAAC,GAAGC,WAAW,CAACK,WAAW;MAC9H,OAAOG,SAAS,GAAGJ,cAAc,IAAIE,aAAa,GAAG,CAAC,EAAE;QAAE;QACtDA,aAAa,IAAI,GAAG;QACpBP,YAAY,CAAC/B,KAAK,CAAC2B,QAAQ,GAAG,GAAGW,aAAa,IAAI;QAClDN,WAAW,CAAChC,KAAK,CAAC2B,QAAQ,GAAG,GAAGW,aAAa,GAAGC,eAAe,IAAI;QACnEC,SAAS,GAAG9B,YAAY,CAACqB,YAAY,CAACtB,WAAW,CAACgC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAEjB,aAAa,CAACO,YAAY,CAAC,CAAC,GAAGC,WAAW,CAACK,WAAW;MAC9H;MAEA,OAAOG,SAAS,GAAGJ,cAAc,IAAIE,aAAa,GAAG,GAAG,EAAE;QAAE;QACxDA,aAAa,IAAI,GAAG;QACpBP,YAAY,CAAC/B,KAAK,CAAC2B,QAAQ,GAAG,GAAGW,aAAa,IAAI;QAClDN,WAAW,CAAChC,KAAK,CAAC2B,QAAQ,GAAG,GAAGW,aAAa,GAAGC,eAAe,IAAI;QACnEC,SAAS,GAAG9B,YAAY,CAACqB,YAAY,CAACtB,WAAW,CAACgC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAEjB,aAAa,CAACO,YAAY,CAAC,CAAC,GAAGC,WAAW,CAACK,WAAW;MAC9H;IACJ;IAEA,SAASK,cAAcA,CAAA,EAAG;MACtB,MAAM5D,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAM8C,YAAY,GAAG/C,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAM+C,YAAY,GAAGhD,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAMqB,eAAe,GAAGtB,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;MAClE,MAAMgD,WAAW,GAAGjD,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;MAE1D,MAAMiD,YAAY,GAAGnD,YAAY,CAACkB,KAAK,CAACC,OAAO,KAAK,MAAM,GAAGnB,YAAY,GAAGgD,YAAY;MACxF,MAAMI,WAAW,GAAGD,YAAY,CAACE,YAAY;MAC7C,MAAMC,cAAc,GAAGrD,QAAQ,CAACG,aAAa,CAAC,eAAe,CAAC,CAACmD,WAAW;;MAE1E;MACA,IAAIM,gBAAgB,GAAG,CAAC;MACxBtC,eAAe,CAACL,KAAK,CAAC2B,QAAQ,GAAG,GAAGgB,gBAAgB,IAAI;MACxD,IAAIC,WAAW,GAAGb,YAAY,CAACI,YAAY,GAAG9B,eAAe,CAAC8B,YAAY;MAE1E,OAAOS,WAAW,GAAGV,WAAW,IAAIS,gBAAgB,GAAG,CAAC,EAAE;QAAE;QACxDA,gBAAgB,IAAI,IAAI;QACxBtC,eAAe,CAACL,KAAK,CAAC2B,QAAQ,GAAG,GAAGgB,gBAAgB,IAAI;QACxDC,WAAW,GAAGb,YAAY,CAACI,YAAY,GAAG9B,eAAe,CAAC8B,YAAY;MAC1E;;MAEA;MACA,OAAOS,WAAW,GAAGV,WAAW,IAAIS,gBAAgB,GAAG,GAAG,EAAE;QAAE;QAC1DA,gBAAgB,IAAI,IAAI;QACxBtC,eAAe,CAACL,KAAK,CAAC2B,QAAQ,GAAG,GAAGgB,gBAAgB,IAAI;QACxDC,WAAW,GAAGb,YAAY,CAACI,YAAY,GAAG9B,eAAe,CAAC8B,YAAY;MAC1E;;MAEA;MACA,IAAIU,kBAAkB,GAAG,GAAG,CAAC,CAAC;MAC9BxC,eAAe,CAACL,KAAK,CAAC8C,UAAU,GAAGD,kBAAkB;MACrDD,WAAW,GAAGb,YAAY,CAACI,YAAY,GAAG9B,eAAe,CAAC8B,YAAY;MAEtE,OAAOS,WAAW,GAAGV,WAAW,IAAIW,kBAAkB,GAAG,CAAC,EAAE;QAAE;QAC1DA,kBAAkB,IAAI,GAAG;QACzBxC,eAAe,CAACL,KAAK,CAAC8C,UAAU,GAAGD,kBAAkB;QACrDD,WAAW,GAAGb,YAAY,CAACI,YAAY,GAAG9B,eAAe,CAAC8B,YAAY;MAC1E;MAEA,OAAOS,WAAW,GAAGV,WAAW,IAAIW,kBAAkB,GAAG,CAAC,EAAE;QAAE;QAC1DA,kBAAkB,IAAI,GAAG;QACzBxC,eAAe,CAACL,KAAK,CAAC8C,UAAU,GAAGD,kBAAkB;QACrDD,WAAW,GAAGb,YAAY,CAACI,YAAY,GAAG9B,eAAe,CAAC8B,YAAY;MAC1E;IACJ;IAEA,SAASY,YAAYA,CAAA,EAAG;MACpB3C,cAAc,CAAC,CAAC;MAChByB,WAAW,CAAC,CAAC;MACb,MAAMmB,aAAa,GAAG9E,MAAM,CAACqC,UAAU,CAAC,oBAAoB,CAAC,CAACC,OAAO;MACrE,IAAIwC,aAAa,EAAE;QACfjE,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC,CAACgB,KAAK,CAAC2B,QAAQ,GAAG,KAAK;QAC9D5C,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACgB,KAAK,CAAC2B,QAAQ,GAAG,OAAO;MACnE;MACAe,cAAc,CAAC,CAAC;IACpB;IAEA,SAASO,gBAAgBA,CAACtC,IAAI,EAAES,OAAO,EAAE8B,KAAK,GAAG,GAAG,EAAEC,QAAQ,EAAE;MAC5D;MACA,IAAI5F,gBAAgB,EAAE;QAClB6F,YAAY,CAAC7F,gBAAgB,CAAC;MAClC;MAEA6D,OAAO,CAAC9B,SAAS,GAAG,EAAE;MACtB,IAAI+D,KAAK,GAAG,CAAC;MACb,MAAMC,KAAK,GAAG,EAAE;;MAEhB;MACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG5C,IAAI,CAAChC,MAAM,EAAE4E,CAAC,EAAE,EAAE;QAClC,MAAMC,IAAI,GAAGzE,QAAQ,CAACY,aAAa,CAAC,MAAM,CAAC;QAC3C6D,IAAI,CAACC,SAAS,GAAG,OAAO;QACxBD,IAAI,CAACxD,KAAK,CAAC0D,KAAK,GAAG,aAAa,CAAC,CAAC;QAClCF,IAAI,CAAC/C,WAAW,GAAGE,IAAI,CAAC4C,CAAC,CAAC;QAC1BnC,OAAO,CAACjB,WAAW,CAACqD,IAAI,CAAC;QACzBF,KAAK,CAACK,IAAI,CAACH,IAAI,CAAC;MACpB;;MAEA;MACA,SAASI,MAAMA,CAAA,EAAG;QACd,IAAIP,KAAK,GAAGC,KAAK,CAAC3E,MAAM,EAAE;UACtB,MAAMkF,UAAU,GAAG9E,QAAQ,CAACmB,IAAI,CAAC4D,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC;UAChE,MAAMC,SAAS,GAAGH,UAAU,GAAG,SAAS,GAAG,SAAS,CAAC,CAAC;;UAEtDP,KAAK,CAACD,KAAK,CAAC,CAACrD,KAAK,CAACiE,UAAU,GAAG,UAAU;UAC1CX,KAAK,CAACD,KAAK,CAAC,CAACrD,KAAK,CAAC0D,KAAK,GAAGM,SAAS;UACpCX,KAAK,EAAE;UACP9F,gBAAgB,GAAG2G,UAAU,CAACN,MAAM,EAAEV,KAAK,CAAC,CAAC,CAAC;QAClD,CAAC,MAAM;UACH,IAAIC,QAAQ,EAAEA,QAAQ,CAAC,CAAC;QAC5B;MACJ;MAEAS,MAAM,CAAC,CAAC;IACZ;IAEA,SAASO,eAAeA,CAAA,EAAG;MACvB,IAAIC,cAAc,GAAG,KAAK;MAC1B,MAAMC,iBAAiB,GAAGtF,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;MACtEqF,iBAAiB,CAACrE,KAAK,CAACiE,UAAU,GAAG,0BAA0B;MAE/DnF,YAAY,CAACwF,gBAAgB,CAAC,YAAY,EAAE,MAAM;QAC9C,MAAMC,QAAQ,GAAGzF,YAAY,CAAC0F,QAAQ,GAAG1F,YAAY,CAAC2F,WAAW;QACjE,IAAIF,QAAQ,GAAG,GAAG,IAAI,CAACH,cAAc,EAAE;UAAE;UACrCC,iBAAiB,CAACrE,KAAK,CAAC0E,OAAO,GAAG,GAAG;UACrCN,cAAc,GAAG,IAAI;QACzB;MACJ,CAAC,CAAC;MAEFtF,YAAY,CAACwF,gBAAgB,CAAC,YAAY,EAAE,MAAM;QAC9C,IAAIxF,YAAY,CAAC2F,WAAW,GAAE,GAAG,IAAI3F,YAAY,CAAC2F,WAAW,GAAE,GAAG,EAAG;UACjEJ,iBAAiB,CAACrE,KAAK,CAAC0E,OAAO,GAAG,GAAG;UACrCN,cAAc,GAAG,KAAK,CAAC,CAAC;QAC5B;MACJ,CAAC,CAAC;;MAEF;MACA;MACA;MACA;IACJ;IAEA,SAASO,iBAAiBA,CAAA,EAAG;MACzB,IAAI5H,UAAU,CAAC4B,MAAM,KAAK,CAAC,IAAI3B,SAAS,EAAE;MAE1CA,SAAS,GAAG,IAAI;MAChB,MAAM;QAAE4H,QAAQ;QAAEC;MAAY,CAAC,GAAG9H,UAAU,CAAC+H,KAAK,CAAC,CAAC;MAEpD,MAAM9C,WAAW,GAAGjD,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;MAC1DgD,WAAW,CAAChC,KAAK,CAAC+E,WAAW,CAAC,eAAe,EAAE,GAAGH,QAAQ,KAAK,CAAC;MAChE5C,WAAW,CAAChC,KAAK,CAAC+E,WAAW,CAAC,kBAAkB,EAAE,GAAGF,WAAW,GAAG,CAAC;MAEpE7C,WAAW,CAAC8B,SAAS,CAACkB,GAAG,CAAC,OAAO,CAAC;MAElCd,UAAU,CAAC,MAAM;QACblC,WAAW,CAAC8B,SAAS,CAACmB,MAAM,CAAC,OAAO,CAAC;QACrCjI,SAAS,GAAG,KAAK;QACjB2H,iBAAiB,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,EAAEE,WAAW,GAAG,IAAI,CAAC;IAC1B;IAEA,SAASK,iBAAiBA,CAAA,EAAG;MACzB,MAAMpG,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAMqF,iBAAiB,GAAGtF,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;MACtE,MAAMmG,kBAAkB,GAAGpG,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;MACxE,MAAMC,oBAAoB,GAAGH,YAAY,CAACI,aAAa,CAAC,QAAQ,CAAC;MACjE,MAAMkG,aAAa,GAAGnG,oBAAoB,CAACoG,YAAY,CAAC,KAAK,CAAC;;MAE9D;MACA,IAAIzH,SAAS,CAACe,MAAM,KAAK,CAAC,EAAE;QACxBf,SAAS,GAAG,CAAC,GAAGJ,YAAY,CAAC;MACjC;;MAEA;MACA,MAAMe,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGd,SAAS,CAACe,MAAM,CAAC;;MAE7D;MACA,MAAM2G,cAAc,GAAG1H,SAAS,CAACiB,MAAM,CAACN,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzDV,kBAAkB,GAAGyH,cAAc;;MAEnC;MACA,IAAI,CAACxH,aAAa,CAAC,CAAC,EAAE;QAClBqH,kBAAkB,CAACnF,KAAK,CAAC0E,OAAO,GAAG,GAAG;MAC1C;MACA5F,YAAY,CAACgF,SAAS,CAACmB,MAAM,CAAC,OAAO,CAAC;MACtCnG,YAAY,CAACgF,SAAS,CAACkB,GAAG,CAAC,MAAM,CAAC;MAClCX,iBAAiB,CAACP,SAAS,CAACmB,MAAM,CAAC,OAAO,CAAC;MAC3CZ,iBAAiB,CAACP,SAAS,CAACkB,GAAG,CAAC,MAAM,CAAC;MACvCG,kBAAkB,CAACrB,SAAS,CAACmB,MAAM,CAAC,OAAO,CAAC;MAC5CE,kBAAkB,CAACrB,SAAS,CAACkB,GAAG,CAAC,MAAM,CAAC;;MAExC;MACAlG,YAAY,CAACwF,gBAAgB,CAAC,cAAc,EAAE,MAAM;QAChD;QACAxF,YAAY,CAACyG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtBzG,YAAY,CAACI,aAAa,CAAC,QAAQ,CAAC,CAACzB,GAAG,GAAG6H,cAAc,CAAC7H,GAAG;QAC7DqB,YAAY,CAACM,IAAI,CAAC,CAAC,CAAC,CAAC;;QAErB;QACAN,YAAY,CAACgF,SAAS,CAACmB,MAAM,CAAC,MAAM,CAAC;QACrCZ,iBAAiB,CAACP,SAAS,CAACmB,MAAM,CAAC,MAAM,CAAC;QAC1CE,kBAAkB,CAACrB,SAAS,CAACmB,MAAM,CAAC,MAAM,CAAC;;QAE3C;QACAnG,YAAY,CAAC0G,IAAI,CAAC,CAAC;QAEnB,IAAI,CAAC1G,YAAY,CAACiB,KAAK,EAAE;UACrB,MAAMV,yBAAyB,GAAGN,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;UAC/EK,yBAAyB,CAACC,SAAS,GAAG,GAAGzB,kBAAkB,CAACF,WAAW,uCAAuC;QAClH,CAAC,MAAM;UACH,MAAM0B,yBAAyB,GAAGN,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;UAC/EK,yBAAyB,CAACC,SAAS,GAAG,GAAGzB,kBAAkB,CAACF,WAAW,uCAAuC;QAClH;;QAEA;QACAmB,YAAY,CAACgF,SAAS,CAACkB,GAAG,CAAC,OAAO,CAAC;QACnCX,iBAAiB,CAACP,SAAS,CAACkB,GAAG,CAAC,OAAO,CAAC;QACxCG,kBAAkB,CAACrB,SAAS,CAACkB,GAAG,CAAC,OAAO,CAAC;;QAEzC;QACAlG,YAAY,CAACwF,gBAAgB,CAAC,cAAc,EAAE,MAAM;UAChDxF,YAAY,CAACgF,SAAS,CAACmB,MAAM,CAAC,OAAO,CAAC;UACtCZ,iBAAiB,CAACP,SAAS,CAACmB,MAAM,CAAC,OAAO,CAAC;UAC3CE,kBAAkB,CAACrB,SAAS,CAACmB,MAAM,CAAC,OAAO,CAAC;UAC5CnG,YAAY,CAACK,YAAY,CAAC,OAAO,EAAEmG,cAAc,CAAC5H,KAAK,CAAC;UACxDyH,kBAAkB,CAACnF,KAAK,CAAC0E,OAAO,GAAG,EAAE;QACzC,CAAC,EAAE;UAAEe,IAAI,EAAE;QAAK,CAAC,CAAC;MACtB,CAAC,EAAE;QAAEA,IAAI,EAAE;MAAK,CAAC,CAAC;IACtB;IAEA,SAASC,UAAUA,CAAA,EAAG;MAClB;MACA,IAAIC,aAAa,GAAG5G,QAAQ,CAACY,aAAa,CAAC,OAAO,CAAC;;MAEnD;MACAgG,aAAa,CAACC,EAAE,GAAG,MAAM;MACzBD,aAAa,CAAClC,SAAS,GAAG,YAAY;MACtCkC,aAAa,CAAC3F,KAAK,CAAC6F,KAAK,GAAG,OAAO;;MAEnC;MACAF,aAAa,CAAClF,WAAW,GAAG,oBAAoB;;MAEhD;MACA,IAAIqF,aAAa,GAAG/G,QAAQ,CAACG,aAAa,CAAC,eAAe,CAAC;;MAE3D;MACA,IAAI4G,aAAa,EAAE;QACfA,aAAa,CAACC,YAAY,CAACJ,aAAa,EAAEG,aAAa,CAACE,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;MAChF;IACJ;IAEA,SAASC,YAAYA,CAAA,EAAG;MACpB;MACA;MACA;;MAEA,MAAMjE,WAAW,GAAGjD,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;MAC1DgD,WAAW,CAAChC,KAAK,CAACiE,UAAU,GAAG,YAAY;;MAE3C;MACA,SAASiC,cAAcA,CAAA,EAAG;QACtBlE,WAAW,CAAC8B,SAAS,CAACkB,GAAG,CAAC,YAAY,CAAC;QACvCd,UAAU,CAAC,YAAW;UAClBlC,WAAW,CAAC8B,SAAS,CAACmB,MAAM,CAAC,YAAY,CAAC;QAC9C,CAAC,EAAE,GAAG,CAAC;MACX;;MAEA;MACA,MAAMkB,SAAS,GAAGC,WAAW,CAAC,YAAW;QACrC,IAAI,CAAClJ,OAAO,EAAE;UACVgJ,cAAc,CAAC,CAAC;QACpB,CAAC,MAAM;UACHG,aAAa,CAACF,SAAS,CAAC,CAAC,CAAC;QAC9B;MACJ,CAAC,EAAE,IAAI,CAAC;IACZ;IAEA,SAASG,qBAAqBA,CAAA,EAAG;MAC7B,MAAMvE,YAAY,GAAGhD,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D+C,YAAY,CAAC/B,KAAK,CAACiE,UAAU,GAAG,UAAU;MAC1ClC,YAAY,CAAC/B,KAAK,CAAC0D,KAAK,GAAG,EAAE,CAAC,CAAC;MAC/B,MAAM6C,YAAY,GAAGxH,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC,CAACyB,WAAW;MAC3E,MAAMJ,eAAe,GAAGtB,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;MAClEqB,eAAe,CAACL,KAAK,CAACwG,SAAS,GAAG,SAAS,CAAC,CAAC;MAC7CnG,eAAe,CAACL,KAAK,CAACyG,aAAa,GAAG,SAAS,CAAC,CAAC;MACjDpG,eAAe,CAACL,KAAK,CAAC0G,gBAAgB,GAAG,SAAS,CAAC,CAAC;;MAEpDzD,gBAAgB,CAACsD,YAAY,EAAElG,eAAe,EAAE,EAAE,EAAE,MAAM;QACtD6D,UAAU,CAAC,MAAM;UACbnF,QAAQ,CAAC4H,gBAAgB,CAAC,UAAU,CAAC,CAACnH,OAAO,CAAC4B,OAAO,IAAI;YACrDA,OAAO,CAACpB,KAAK,CAACiE,UAAU,GAAG,UAAU;YACrC7C,OAAO,CAACpB,KAAK,CAAC0D,KAAK,GAAG,EAAE,CAAC,CAAC;UAC9B,CAAC,CAAC;UACF3E,QAAQ,CAAC4H,gBAAgB,CAAC,UAAU,CAAC,CAACnH,OAAO,CAAC4B,OAAO,IAAI;YACrDA,OAAO,CAACpB,KAAK,CAACiE,UAAU,GAAG,UAAU;YACrC7C,OAAO,CAACpB,KAAK,CAAC0D,KAAK,GAAG,EAAE,CAAC,CAAC;UAC9B,CAAC,CAAC;UACF,MAAMkD,YAAY,GAAG7H,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;UAC5D4H,YAAY,CAAC5G,KAAK,CAACiE,UAAU,GAAG,UAAU;UAC1C2C,YAAY,CAAC5G,KAAK,CAAC0D,KAAK,GAAG,EAAE,CAAC,CAAC;;UAE/B,MAAMmD,OAAO,GAAG9H,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC;UAClD6H,OAAO,CAAC7G,KAAK,CAAC8G,aAAa,GAAG,MAAM,CAAC,CAAC;;UAEtC5C,UAAU,CAAC,MAAM;YACb+B,YAAY,CAAC,CAAC;;YAEd;YACA/B,UAAU,CAAC,MAAM;cACbnF,QAAQ,CAAC4H,gBAAgB,CAAC,UAAU,CAAC,CAACnH,OAAO,CAAC4B,OAAO,IAAI;gBACrDA,OAAO,CAACpB,KAAK,CAACiE,UAAU,GAAG,YAAY;cAC3C,CAAC,CAAC;cACFlF,QAAQ,CAAC4H,gBAAgB,CAAC,UAAU,CAAC,CAACnH,OAAO,CAAC4B,OAAO,IAAI;gBACrDA,OAAO,CAACpB,KAAK,CAACiE,UAAU,GAAG,YAAY;cAC3C,CAAC,CAAC;YACN,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;UACd,CAAC,EAAE,IAAI,CAAC;QACZ,CAAC,EAAE,IAAI,CAAC;MACZ,CAAC,CAAC;IACN;IAEA,SAAS8C,uBAAuBA,CAAA,EAAG;MAC/B,MAAMjI,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D,MAAMmG,kBAAkB,GAAGpG,QAAQ,CAACG,aAAa,CAAC,sBAAsB,CAAC;MAEzE,IAAI,CAACb,aAAa,CAAC,CAAC,EAAE;QAClBS,YAAY,CAACwF,gBAAgB,CAAC,YAAY,EAAE,MAAM;UAC9Ca,kBAAkB,CAACnF,KAAK,CAAC0E,OAAO,GAAG,KAAK;QAC5C,CAAC,CAAC;QAEF5F,YAAY,CAACwF,gBAAgB,CAAC,YAAY,EAAE,MAAM;UAC9Ca,kBAAkB,CAACnF,KAAK,CAAC0E,OAAO,GAAG,GAAG;QAC1C,CAAC,CAAC;MACN;IACJ;IAEA3F,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACsF,gBAAgB,CAAC,OAAO,EAAE,YAAW;MAExE,IAAIhH,YAAY,EAAE;QACd4H,iBAAiB,CAAC,CAAC;MACvB;MAEAhI,OAAO,GAAG,IAAI;MACd,MAAM8E,WAAW,GAAGjD,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;MAC1D;MACAgD,WAAW,CAAC8B,SAAS,CAACmB,MAAM,CAAC,YAAY,CAAC;MAC1CjD,WAAW,CAAC8B,SAAS,CAACmB,MAAM,CAAC,YAAY,CAAC;MAC1C;MACA;MACA;MACA;MACA;;MAEAhI,UAAU,EAAE;;MAEZ;MACA,IAAI2H,QAAQ,GAAGpG,IAAI,CAACwI,GAAG,CAAC,EAAE,GAAG/J,UAAU,GAAG,CAAC,EAAEG,QAAQ,CAAC,CAAC,CAAC;MACxD,IAAIyH,WAAW,GAAGrG,IAAI,CAACyI,GAAG,CAAC,GAAG,GAAGhK,UAAU,GAAG,IAAI,EAAEI,WAAW,CAAC,CAAC,CAAC;;MAElEN,UAAU,CAAC4G,IAAI,CAAC;QAAEiB,QAAQ;QAAEC;MAAY,CAAC,CAAC;MAC1CF,iBAAiB,CAAC,CAAC;;MAEnB;MACAvB,YAAY,CAACjG,YAAY,CAAC;;MAE1B;MACAA,YAAY,GAAG+G,UAAU,CAAC,MAAM;QAC5BjH,UAAU,GAAG,CAAC;MAClB,CAAC,EAAE,GAAG,CAAC;IACX,CAAC,CAAC;IAEF,IAAIiB,MAAM,CAACgJ,QAAQ,CAACC,QAAQ,KAAK,aAAa,EAAE;MAAE;MAC9C,MAAMN,OAAO,GAAG9H,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC;MAClD6H,OAAO,CAAC7G,KAAK,CAAC8G,aAAa,GAAG,MAAM,CAAC,CAAC;IAC1C;IAEAxI,iBAAiB,CAAC,CAAC;IAEnB,MAAMQ,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;IAC5D,MAAMoI,aAAa,GAAGrI,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;IAC7DF,YAAY,CAACkB,KAAK,CAAC0E,OAAO,GAAG,GAAG;IAChC;IACA,SAAS2C,mBAAmBA,CAAA,EAAG;MAC3B;MACA,IAAIC,WAAW,GAAG,KAAK;;MAEvB;MACA,MAAMC,WAAW,GAAGrD,UAAU,CAAC,MAAM;QACjC,IAAI,CAACoD,WAAW,EAAE;UACdE,gBAAgB,CAAC,IAAIC,KAAK,CAAC,mCAAmC,CAAC,CAAC;QACpE;MACJ,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;;MAEV;MACA,SAASD,gBAAgBA,CAACE,KAAK,EAAE;QAC7B7K,OAAO,CAAC6K,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;QAC9BpK,YAAY,GAAG,KAAK;QACpBwB,YAAY,CAACkB,KAAK,CAACC,OAAO,GAAG,MAAM;QACnCmH,aAAa,CAACpH,KAAK,CAACC,OAAO,GAAG,OAAO;QACrCmH,aAAa,CAACpH,KAAK,CAAC0E,OAAO,GAAG,GAAG;QACjC,MAAMiD,eAAe,GAAGvB,WAAW,CAAC,YAAW;UAC3C,IAAItE,YAAY,CAAC8F,YAAY,GAAG,CAAC,IAAI9F,YAAY,CAAC+F,aAAa,GAAG,CAAC,EAAE;YACjE,MAAMC,WAAW,GAAGhG,YAAY,CAAC8F,YAAY,GAAG9F,YAAY,CAAC+F,aAAa;YAC1E;YACA,IAAIrJ,IAAI,CAACuJ,GAAG,CAACD,WAAW,GAAI,CAAC,GAAG,EAAG,CAAC,GAAG,IAAI,EAAE;cACzCzB,aAAa,CAACsB,eAAe,CAAC;cAE9B5E,YAAY,CAAC,CAAC;cAEdmB,UAAU,CAAC,MAAM;gBACboC,qBAAqB,CAAC,CAAC;cAC3B,CAAC,EAAE,IAAI,CAAC;YACZ;UACJ;QACJ,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;MACb;;MAEA;MACAxH,YAAY,CAACwF,gBAAgB,CAAC,YAAY,EAAE,MAAM;QAC9CgD,WAAW,GAAG,IAAI;QAClBlE,YAAY,CAACmE,WAAW,CAAC,CAAC,CAAC;;QAE3B;QACAzI,YAAY,CAAC0G,IAAI,CAAC,CAAC,CAACwC,IAAI,CAAC,MAAM;UAC3B,MAAML,eAAe,GAAGvB,WAAW,CAAC,YAAW;YAC3C,IAAItH,YAAY,CAACmJ,UAAU,GAAG,CAAC,IAAInJ,YAAY,CAACoJ,WAAW,GAAG,CAAC,EAAE;cAC7D,MAAMJ,WAAW,GAAGhJ,YAAY,CAACmJ,UAAU,GAAGnJ,YAAY,CAACoJ,WAAW;cACtE;cACA,IAAI1J,IAAI,CAACuJ,GAAG,CAACD,WAAW,GAAI,CAAC,GAAG,EAAG,CAAC,GAAG,IAAI,EAAE;gBACzCzB,aAAa,CAACsB,eAAe,CAAC;;gBAE9B;gBACAZ,uBAAuB,CAAC,CAAC;gBACzBhE,YAAY,CAAC,CAAC;gBAEdjE,YAAY,CAACwF,gBAAgB,CAAC,OAAO,EAAE,MAAM;kBACzC,IAAIxF,YAAY,CAACiB,KAAK,EAAE;oBACpBjB,YAAY,CAACiB,KAAK,GAAG,KAAK;oBAC1BjB,YAAY,CAACkB,KAAK,CAACmI,MAAM,GAAG,eAAe;oBAC3C;oBACA,MAAM9I,yBAAyB,GAAGN,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;oBAC/EK,yBAAyB,CAACC,SAAS,GAAG,GAAGzB,kBAAkB,CAACF,WAAW,uCAAuC;kBAClH,CAAC,MAAM;oBACHmB,YAAY,CAACiB,KAAK,GAAG,IAAI;oBACzBjB,YAAY,CAACkB,KAAK,CAACmI,MAAM,GAAG,gBAAgB;oBAC5C;oBACA,MAAM9I,yBAAyB,GAAGN,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;oBAC/EK,yBAAyB,CAACC,SAAS,GAAG,GAAGzB,kBAAkB,CAACF,WAAW,uCAAuC;kBAClH;gBACJ,CAAC,CAAC;gBAEF4B,aAAa,CAAC,CAAC;gBACf4E,eAAe,CAAC,CAAC;gBAEjBD,UAAU,CAAC,MAAM;kBACboC,qBAAqB,CAAC,CAAC;gBAC3B,CAAC,EAAE,IAAI,CAAC;cACZ;YACJ;UACJ,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC8B,KAAK,CAAEV,KAAK,IAAK;UAChB;UACAF,gBAAgB,CAACE,KAAK,CAAC;QAC3B,CAAC,CAAC;MACN,CAAC,EAAE;QAAEjC,IAAI,EAAE;MAAK,CAAC,CAAC;;MAElB;MACA,IAAI;QACA3G,YAAY,CAACM,IAAI,CAAC,CAAC;MACvB,CAAC,CAAC,OAAOsI,KAAK,EAAE;QACZF,gBAAgB,CAACE,KAAK,CAAC;MAC3B;IACJ;;IAEA;IACAL,mBAAmB,CAAC,CAAC;IAErBnJ,MAAM,CAACmK,QAAQ,GAAG,MAAM;MACpB;MACA,IAAI9K,gBAAgB,EAAE;QAClB6F,YAAY,CAAC7F,gBAAgB,CAAC;MAClC;MACAV,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;MACrBiG,YAAY,CAAC,CAAC;MACd,MAAMc,UAAU,GAAG9E,QAAQ,CAACmB,IAAI,CAAC4D,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC;MAChE,MAAM1D,eAAe,GAAGtB,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;MAClE,MAAMgF,SAAS,GAAGH,UAAU,GAAG,SAAS,GAAG,SAAS,CAAC,CAAC;MACtDxD,eAAe,CAACL,KAAK,CAACiE,UAAU,GAAG,UAAU;MAC7C5D,eAAe,CAACL,KAAK,CAAC0D,KAAK,GAAGM,SAAS;MACvC3D,eAAe,CAACL,KAAK,CAACiE,UAAU,GAAG,EAAE;MACrC5D,eAAe,CAACL,KAAK,CAACwG,SAAS,GAAG,SAAS;MAC3CnG,eAAe,CAACL,KAAK,CAACyG,aAAa,GAAG,SAAS;MAC/CpG,eAAe,CAACL,KAAK,CAAC0G,gBAAgB,GAAG,SAAS;MAClD3H,QAAQ,CAAC4H,gBAAgB,CAAC,UAAU,CAAC,CAACnH,OAAO,CAAC4B,OAAO,IAAI;QACrDA,OAAO,CAACpB,KAAK,CAACiE,UAAU,GAAG,UAAU;QACrC7C,OAAO,CAACpB,KAAK,CAAC0D,KAAK,GAAG,EAAE,CAAC,CAAC;MAC9B,CAAC,CAAC;MACF3E,QAAQ,CAAC4H,gBAAgB,CAAC,UAAU,CAAC,CAACnH,OAAO,CAAC4B,OAAO,IAAI;QACrDA,OAAO,CAACpB,KAAK,CAACiE,UAAU,GAAG,UAAU;QACrC7C,OAAO,CAACpB,KAAK,CAAC0D,KAAK,GAAG,EAAE,CAAC,CAAC;MAC9B,CAAC,CAAC;MACF,MAAMkD,YAAY,GAAG7H,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC;MAC5D4H,YAAY,CAAC5G,KAAK,CAACiE,UAAU,GAAG,UAAU;MAC1C2C,YAAY,CAAC5G,KAAK,CAAC0D,KAAK,GAAG,EAAE,CAAC,CAAC;;MAE/B,MAAMmD,OAAO,GAAG9H,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC;MAClD6H,OAAO,CAAC7G,KAAK,CAAC8G,aAAa,GAAG,MAAM,CAAC,CAAC;IAC1C,CAAC;EACL;EAEA,IAAI/H,QAAQ,CAACuJ,UAAU,KAAK,SAAS,EAAE;IACnCvJ,QAAQ,CAACuF,gBAAgB,CAAC,kBAAkB,EAAE1H,kBAAkB,CAAC;EACrE,CAAC,MAAM;IACH;IACAA,kBAAkB,CAAC,CAAC;EACxB;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}